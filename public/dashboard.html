<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta name="description" content="FinTrackr - современное приложение для управления личными финансами" />
    <meta name="theme-color" content="#6366f1" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="FinTrackr" />
    <title>FinTrackr – Дэшборд</title>
    <link rel="stylesheet" href="css/design-system.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
  <script defer src="js/utils/auth.js"></script>
  <script defer src="js/app.js"></script>
  </head>
  <body class="workspace-page" data-page-title="Дэшборд" data-page-subtitle="Прогнозы, бюджеты и уведомления в едином месте">
    <header data-page-title="Дэшборд" data-page-subtitle="Прогнозы, бюджеты и уведомления в едином месте">
      <div class="brand visually-hidden">
        <a href="dashboard.html">FinTrackr</a>
      </div>
      <button class="burger" aria-label="Меню">
        <span></span><span></span><span></span>
      </button>
    </header>

    <!-- Include sidebar component -->
    <aside
      class="sidebar"
      id="sidebar"
      role="navigation"
      aria-label="Боковая навигация"
    >
    <!-- sidebar-top удалён: логотип перенесён в header, sidebar начинается от края -->

    <div class="sidebar-scroll">
      <nav class="sidebar-nav" aria-label="Меню приложения">
        <div class="nav-section">
          <h3 class="nav-section-title">Основное</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="dashboard.html" class="nav-link">
                <span class="nav-icon">🏠</span>
                <span class="nav-label">Дэшборд</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="accounts.html" class="nav-link">
                <span class="nav-icon">💼</span>
                <span class="nav-label">Счёта</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="transactions.html" class="nav-link">
                <span class="nav-icon">🔁</span>
                <span class="nav-label">Операции</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="categories.html" class="nav-link">
                <span class="nav-icon">🔖</span>
                <span class="nav-label">Категории</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h3 class="nav-section-title">Планирование</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="budgets.html" class="nav-link">
                <span class="nav-icon">📊</span>
                <span class="nav-label">Бюджеты</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="goals.html" class="nav-link">
                <span class="nav-icon">🎯</span>
                <span class="nav-label">Цели</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="planned.html" class="nav-link">
                <span class="nav-icon">📅</span>
                <span class="nav-label">Планируемые</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="recurring.html" class="nav-link">
                <span class="nav-icon">🔄</span>
                <span class="nav-label">Регулярные</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h3 class="nav-section-title">Аналитика</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="reports.html" class="nav-link">
                <span class="nav-icon">📈</span>
                <span class="nav-label">Отчёты</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="forecast.html" class="nav-link">
                <span class="nav-icon">🔮</span>
                <span class="nav-label">Прогнозы</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="rules.html" class="nav-link">
                <span class="nav-icon">⚙️</span>
                <span class="nav-label">Правила</span>
              </a>
            </li>
          </ul>
        </div>

        <div class="nav-section">
          <h3 class="nav-section-title">Дополнительно</h3>
          <ul class="nav-list">
            <li class="nav-item">
              <a href="education.html" class="nav-link">
                <span class="nav-icon">📚</span>
                <span class="nav-label">Обучение</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="premium.html" class="nav-link">
                <span class="nav-icon">⭐</span>
                <span class="nav-label">Премиум</span>
              </a>
            </li>
            <li class="nav-item">
              <a href="settings.html" class="nav-link">
                <span class="nav-icon">🔧</span>
                <span class="nav-label">Настройки</span>
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
    </aside>

    <div class="sidebar-backdrop" id="sidebarBackdrop" aria-hidden="true"></div>

    <main class="workspace-main dashboard-shell" role="main" aria-label="Обзор финансов FinTrackr">
      <section class="dashboard-hero">
        <div class="hero-main">
          <div>
            <p class="hero-eyebrow">Привет, <span id="heroUserName">друг</span></p>
            <h1>Дэшборд</h1>
            <p class="hero-description">Прогнозы, бюджеты и уведомления в едином месте.</p>
            <div class="hero-tags">
              <span class="hero-pill" id="heroPeriodLabel">Текущий месяц</span>
              <span class="hero-pill hero-pill--soft" id="heroPlanLabel">Базовый план</span>
            </div>
          </div>
          <div class="hero-balance-card">
            <p class="muted-label">Консолидированный баланс</p>
            <p class="hero-balance-value">
              <span id="heroBalanceValue">0.00</span>
              <span id="heroBalanceCurrency">USD</span>
            </p>
            <p class="hero-note" id="heroBalanceHint">Счета: 0</p>
          </div>
        </div>
        <div class="hero-actions">
          <button class="btn-primary btn-pill" onclick="location.href='transactions.html#new'">+ Операция</button>
          <button class="btn-secondary btn-pill" onclick="location.href='budgets.html'">Создать бюджет</button>
          <button class="btn-ghost btn-pill" onclick="location.href='planned.html'">План на неделю</button>
        </div>
      </section>

      <section class="dashboard-metrics" aria-label="Ключевые показатели">
        <article class="metric-card metric-card--balance">
          <div>
            <p class="metric-label">Баланс</p>
            <p class="metric-value">
              <strong id="totalBalance">0.00</strong>
              <span class="currency-code">USD</span>
            </p>
          </div>
          <p class="metric-subtitle">Консолидировано по всем счетам</p>
        </article>
        <article class="metric-card metric-card--income">
          <div>
            <p class="metric-label">Доходы месяца</p>
            <p class="metric-value">
              <strong id="totalIncome">0.00</strong>
              <span class="currency-code">USD</span>
            </p>
          </div>
          <p class="metric-subtitle">Обновлено сегодня</p>
        </article>
        <article class="metric-card metric-card--expense">
          <div>
            <p class="metric-label">Расходы месяца</p>
            <p class="metric-value">
              <strong id="totalExpense">0.00</strong>
              <span class="currency-code">USD</span>
            </p>
          </div>
          <p class="metric-subtitle">Включая регулярные платежи</p>
        </article>
        <article class="metric-card metric-card--health">
          <div>
            <p class="metric-label">Финансовое здоровье</p>
            <p class="metric-value">
              <strong id="financialHealth">0%</strong>
            </p>
          </div>
          <div class="metric-progress">
            <span id="healthProgress" class="metric-progress-fill" style="width:0%"></span>
          </div>
          <p class="metric-subtitle">Соотношение доходов и расходов</p>
        </article>
      </section>

      <section class="dashboard-panels">
        <article class="panel panel--chart">
          <div class="panel-header">
            <div>
              <p class="muted-label">Динамика расходов</p>
              <h2>Расходы по категориям</h2>
            </div>
            <button class="btn-secondary btn-pill" onclick="location.href='transactions.html'">К журналу</button>
          </div>
          <div class="panel-body">
            <canvas
              id="expenseChart"
              width="600"
              height="320"
              aria-label="Динамика расходов"
              role="img"
            ></canvas>
          </div>
        </article>

        <article class="panel panel--split">
          <div class="panel-header">
            <div>
              <p class="muted-label">Структура расходов</p>
              <h2>Категории месяца</h2>
            </div>
            <a class="link-ghost" href="categories.html">Управлять категориями →</a>
          </div>
          <div class="panel-body panel-body--split">
            <canvas
              id="expensePie"
              width="320"
              height="320"
              aria-label="Круговая диаграмма расходов"
              role="img"
            ></canvas>
            <div class="top-list">
              <p class="muted-label">Топ расходов</p>
              <ul id="topCategories" class="list-compact">
                <li>Нет данных</li>
              </ul>
            </div>
          </div>
        </article>
      </section>

      <section class="dashboard-secondary">
        <article class="panel panel--assistant">
          <div class="panel-header">
            <div>
              <p class="muted-label">AI ассистент</p>
              <h2>Прогноз на 30 дней</h2>
            </div>
            <span class="pill pill--accent">Beta</span>
          </div>
          <div class="ai-grid">
            <div>
              <p class="muted-label">Доходы</p>
              <p class="ai-value">
                <strong id="aiIncome">0.00</strong>
                <span class="currency-code">USD</span>
              </p>
            </div>
            <div>
              <p class="muted-label">Расходы</p>
              <p class="ai-value">
                <strong id="aiExpense">0.00</strong>
                <span class="currency-code">USD</span>
              </p>
            </div>
          </div>
          <p class="panel-note">Модель анализирует прошлые операции и бюджеты, чтобы дать прозрачный прогноз экономии.</p>
        </article>

        <article class="panel panel--targets">
          <div class="panel-header">
            <div>
              <p class="muted-label">Бюджеты</p>
              <h2>Контроль лимитов</h2>
            </div>
            <button class="btn-ghost" onclick="location.href='budgets.html'">Открыть бюджеты</button>
          </div>
          <div class="targets-body">
            <p class="targets-value" id="dashboardPlanValue">0 / 0</p>
            <div class="progress-track">
              <span class="progress-value" id="dashboardPlanProgressLabel">0%</span>
              <div class="progress-bar progress-bar--elevated">
                <span id="dashboardPlanProgress" style="width:0%"></span>
              </div>
            </div>
            <p class="hero-note" id="dashboardPlanHint">Добавьте бюджет, чтобы отслеживать прогресс автоматически.</p>
          </div>
        </article>

        <article class="panel panel--feed">
          <div class="panel-header">
            <div>
              <p class="muted-label">Активность</p>
              <h2>Лента действий</h2>
            </div>
          </div>
          <ul class="feed-list">
            <li>
              <div>
                <p class="feed-title">Синхронизированы последние операции</p>
                <p class="feed-meta">2 минуты назад • API банка «Альфа»</p>
              </div>
              <button class="link-ghost" onclick="location.href='transactions.html'">Смотреть</button>
            </li>
            <li>
              <div>
                <p class="feed-title">Порог расходов в категории «Жильё» достигнут 75%</p>
                <p class="feed-meta">Сегодня • Автоуведомление</p>
              </div>
              <button class="link-ghost" onclick="location.href='categories.html'">Настроить</button>
            </li>
            <li>
              <div>
                <p class="feed-title">Доступен новый отчёт о подписках</p>
                <p class="feed-meta">Вчера • Аналитика FinTrackr</p>
              </div>
              <button class="link-ghost" onclick="location.href='subscriptions.html'">Открыть</button>
            </li>
          </ul>
        </article>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 FinTrackr. Все права защищены.</p>
    </footer>
  </body>
</html>
