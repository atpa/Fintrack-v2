<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FinTrackr – Счёта</title>
    <link rel="stylesheet" href="css/design-system.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive-tables.css" />
    <script defer src="js/utils/auth.js"></script>
    <script defer src="js/app.js"></script>
    <script defer src="js/utils/ui.js"></script>
    <script type="module" src="js/accounts.js"></script>
  </head>
  <body class="workspace-page" data-page-title="Счёта" data-page-subtitle="Управляйте кошельками и картами в одном месте">
    <header>
      <div class="brand visually-hidden">
        <a href="dashboard.html">FinTrackr</a>
      </div>
      <button class="burger" aria-label="Меню">
        <span></span><span></span><span></span>
      </button>
    </header>

    <aside class="sidebar" id="sidebar" role="navigation" aria-label="Боковая навигация">
      <!-- sidebar-top removed: sidebar starts at header edge -->

      <div class="sidebar-scroll">
        <nav class="sidebar-nav" aria-label="Меню приложения">
          <div class="nav-section">
            <h3 class="nav-section-title">Основное</h3>
            <ul class="nav-list">
              <li class="nav-item"><a href="dashboard.html" class="nav-link"><span class="nav-icon">🏠</span><span class="nav-label">Дэшборд</span></a></li>
              <li class="nav-item"><a href="accounts.html" class="nav-link"><span class="nav-icon">💼</span><span class="nav-label">Счёта</span></a></li>
              <li class="nav-item"><a href="transactions.html" class="nav-link"><span class="nav-icon">🔁</span><span class="nav-label">Операции</span></a></li>
              <li class="nav-item"><a href="categories.html" class="nav-link"><span class="nav-icon">🔖</span><span class="nav-label">Категории</span></a></li>
            </ul>
          </div>

          <div class="nav-section">
            <h3 class="nav-section-title">Планирование</h3>
            <ul class="nav-list">
              <li class="nav-item"><a href="budgets.html" class="nav-link"><span class="nav-icon">📊</span><span class="nav-label">Бюджеты</span></a></li>
              <li class="nav-item"><a href="goals.html" class="nav-link"><span class="nav-icon">🎯</span><span class="nav-label">Цели</span></a></li>
              <li class="nav-item"><a href="planned.html" class="nav-link"><span class="nav-icon">📅</span><span class="nav-label">Планируемые</span></a></li>
              <li class="nav-item"><a href="recurring.html" class="nav-link"><span class="nav-icon">🔄</span><span class="nav-label">Регулярные</span></a></li>
            </ul>
          </div>

          <div class="nav-section">
            <h3 class="nav-section-title">Аналитика</h3>
            <ul class="nav-list">
              <li class="nav-item"><a href="reports.html" class="nav-link"><span class="nav-icon">📈</span><span class="nav-label">Отчёты</span></a></li>
              <li class="nav-item"><a href="forecast.html" class="nav-link"><span class="nav-icon">🔮</span><span class="nav-label">Прогнозы</span></a></li>
              <li class="nav-item"><a href="rules.html" class="nav-link"><span class="nav-icon">⚙️</span><span class="nav-label">Правила</span></a></li>
            </ul>
          </div>

          <div class="nav-section">
            <h3 class="nav-section-title">Дополнительно</h3>
            <ul class="nav-list">
              <li class="nav-item"><a href="education.html" class="nav-link"><span class="nav-icon">📚</span><span class="nav-label">Обучение</span></a></li>
              <li class="nav-item"><a href="premium.html" class="nav-link"><span class="nav-icon">⭐</span><span class="nav-label">Премиум</span></a></li>
              <li class="nav-item"><a href="settings.html" class="nav-link"><span class="nav-icon">🔧</span><span class="nav-label">Настройки</span></a></li>
            </ul>
          </div>
        </nav>
      </div>

      <!-- sidebar-footer удалён: профиль и auth вынесены в header dropdown -->
    </aside>

    <div class="sidebar-backdrop" id="sidebarBackdrop" aria-hidden="true"></div>

    <main class="workspace-main workspace-shell" role="main" aria-label="Управление счетами">
      <section class="workspace-hero">
        <div class="hero-main">
          <div>
            <p class="hero-eyebrow">Счета</p>
            <h1>Все счета в одном месте</h1>
            <p class="hero-description">Создавайте счета, фильтруйте их по валютам и отслеживайте текущие балансы.</p>
            <div class="hero-tags">
              <span class="hero-pill" id="accountsHeroCurrencyTag">Валюта: USD</span>
              <span class="hero-pill hero-pill--soft">В работе</span>
            </div>
          </div>
          <div class="hero-balance-card">
            <p class="muted-label">Консолидированный баланс</p>
            <p class="hero-balance-value">
              <span id="accountsHeroBalance">0.00</span>
              <span id="accountsHeroCurrency">USD</span>
            </p>
            <p class="hero-note" id="accountsHeroHint">Нет активных счетов</p>
          </div>
        </div>
        <div class="hero-actions">
          <button class="btn-primary btn-pill" onclick="document.getElementById('accName').focus()">+ Новый счёт</button>
          <button class="btn-secondary btn-pill" onclick="location.href='transactions.html'">Журнал операций</button>
        </div>
      </section>

      <section class="metrics-grid">
        <article class="metric-card">
          <p class="metric-label">Всего счетов</p>
          <p class="metric-value"><strong id="accountsMetricCount">0</strong></p>
          <p class="metric-subtitle">Поддерживаются онлайн и офлайн счета</p>
        </article>
        <article class="metric-card">
          <p class="metric-label">Положительный баланс</p>
          <p class="metric-value"><strong id="accountsMetricPositive">0</strong></p>
          <p class="metric-subtitle">Количество счетов &gt; 0</p>
        </article>
        <article class="metric-card">
          <p class="metric-label">Отрицательный баланс</p>
          <p class="metric-value"><strong id="accountsMetricNegative">0</strong></p>
          <p class="metric-subtitle">Контролируйте перерасход</p>
        </article>
        <article class="metric-card">
          <p class="metric-label">Средний баланс</p>
          <p class="metric-value">
            <strong id="accountsMetricAverage">0.00</strong>
            <span class="currency-code" id="accountsMetricCurrency">USD</span>
          </p>
          <p class="metric-subtitle">По всем активным счетам</p>
        </article>
      </section>

      <section class="workspace-grid">
        <article class="panel" aria-labelledby="addAccountTitle">
          <div class="panel-header">
            <div>
              <p class="muted-label">Создание счёта</p>
              <h2 id="addAccountTitle">Добавить счёт</h2>
            </div>
          </div>
          <form id="addAccountForm" class="panel-body">
            <div class="form-grid">
              <div class="form-field">
                <label for="accName">Название</label>
                <input type="text" id="accName" required />
                <span class="form-error" data-error-for="accName"></span>
              </div>
              <div class="form-field form-field--short">
                <label for="accCurrency">Валюта</label>
                <select id="accCurrency" required>
                  <option value="USD">USD</option>
                  <option value="EUR">EUR</option>
                  <option value="PLN">PLN</option>
                  <option value="RUB">RUB</option>
                </select>
                <span class="form-error" data-error-for="accCurrency"></span>
              </div>
              <div class="form-field form-field--short">
                <label for="accBalance">Начальный баланс</label>
                <input type="number" id="accBalance" step="0.01" />
                <span class="form-error" data-error-for="accBalance"></span>
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn-primary">Сохранить</button>
            </div>
          </form>
        </article>

        <article class="panel" aria-labelledby="accountsListTitle">
          <div class="panel-header">
            <div>
              <p class="muted-label">Коллекция счетов</p>
              <h2 id="accountsListTitle">Счета</h2>
            </div>
            <a class="link-ghost" href="transactions.html">История операций →</a>
          </div>
          <div class="panel-body">
            <div class="filters-row">
              <div class="form-field">
                <label for="accountSearch">Поиск</label>
                <input type="text" id="accountSearch" placeholder="Введите название" />
              </div>
              <div class="form-field form-field--short">
                <label for="accountCurrencyFilter">Валюта</label>
                <select id="accountCurrencyFilter">
                  <option value="">Все</option>
                  <option value="USD">USD</option>
                  <option value="EUR">EUR</option>
                  <option value="PLN">PLN</option>
                  <option value="RUB">RUB</option>
                </select>
              </div>
              <div class="form-field form-field--short">
                <label for="accountsPageSize">На странице</label>
                <select id="accountsPageSize">
                  <option value="5">5</option>
                  <option value="10" selected>10</option>
                  <option value="20">20</option>
                </select>
              </div>
            </div>
            <div class="list-meta">
              Найдено: <span id="accountsFilteredCount">0</span>
            </div>
            <div id="accountsList" class="wallet-grid" aria-live="polite">
              <div class="wallet-card" role="status">
                <div class="wallet-header">
                  <div class="wallet-icon">💼</div>
                  <div class="wallet-name">Загрузка…</div>
                </div>
                <div class="wallet-balance">0.00 <span class="currency">USD</span></div>
              </div>
            </div>
            <table id="accountsTable" class="visually-hidden" aria-hidden="true">
              <thead>
                <tr>
                  <th>Название</th>
                  <th>Валюта</th>
                  <th>Баланс</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="3">Загрузка...</td>
                </tr>
              </tbody>
            </table>
            <div class="table-controls">
              <div class="table-pagination" id="accountsPagination"></div>
            </div>
          </div>
        </article>
      </section>
    </main>

    <footer>
      <p>&copy; 2025 FinTrackr. Все права защищены.</p>
    </footer>
  </body>
</html>
